{% extends 'myadmin/base.html' %}
{% load static %}
{% load thumbnail %}

{% block content %}

<div class="ui grid">
    <div class="row">
        <h3>菜谱编辑</h3>
    </div>
    <div class="ui divider"></div>
    <div class="row">
        <div class="v-form-wrap">

            <form class="ui form"  method="post" action="{% url 'myadmin:ai_add' %}"
                  enctype="multipart/form-data" role="form">
                {% csrf_token %}
                <input name="video_id" id="video_id" type="hidden">
                <div class="field">
                    <label>菜谱标题</label>
                    <input name="title" id="title_id" type="text" placeholder={{ form.title }}>



                </div>
                <div class="field">
                    <label>菜谱描述</label>

                    <input name="desc" id="desc_id" type="text" placeholder={{ form.desc }}>
                </div>
                <div class="field">
                    <label>菜谱分类</label>
                     <select name="option">
                        <option value="" >请选择...</option>
                        {% for item in clf_list %}
                            <option value= "{{ itm.id }}" >{{ item.title }}</option>
                        {% endfor %}
                     </select>
<!--                    <div class="ui selection  dropdown">-->

<!--                        <i class="dropdown icon"></i>-->
<!--                        <div class="default text" >{{ form.classification  }}</div>-->
<!--                        <div class="menu">-->
<!--                            {% for item in clf_list %}-->
<!--                            <div class="item" data-value="{{item.id}}">{{item.title}}</div>-->
<!--                            {% endfor %}-->
<!--                        </div>-->
<!--                    </div>-->
                </div>

                 <div class="field">
                    <label>发布状态</label>
                    <div class="ui selection  dropdown">

                        <i class="dropdown icon"></i>
                        <div class="default text">{{form.status}} </div>
                        <div class="menu">
                            <div class="item" data-value="0">发布</div>
                            <div class="item" data-value="1">取消发布</div>
                        </div>
                    </div>
                </div>

                <div class="field">
                    <label>菜谱封面</label>
                    {% thumbnail form.cover "300x200" crop="center" as im %}
                      <img class="ui small image" src="{{ im.url }}">
                    {% empty %}
                    {% endthumbnail %}

                    <div class="v-form-field">
<!--                        <label class="ui large green label" for="id_cover">-->
                             上传菜谱图

<!--                             {form.cover}}-->
                        </label>
                         <input id="chunked_upload" type="file" name="the_file"  accept="image/*">
                        <span id="file_is_choose" class="n">文件已选择</span>
                    </div>
                </div>
                <button class="ui primary button" type="submit">保存</button>

                {% include "base/form_errors.html" %}
                {% include "base/form_messages.html" %}

            </form>


        </div>
    </div>
</div>


{% endblock content %}

{% block modal %}
{% endblock modal %}

{% block javascript %}

<script>
$(function(){

    $('.ui .dropdown').dropdown();

    $("#id_cover").change(function(){
        $("#file_is_choose").show()
    });

});
</script>

{% endblock javascript %}
